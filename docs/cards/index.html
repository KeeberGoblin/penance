<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PENANCE: Card Database</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===========================
           GLOBAL RESET & VARIABLES
           =========================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Gothic Color Palette */
            --parchment-dark: #1a1410;
            --leather-brown: #2b1f17;
            --blood-red: #4a0e0e;
            --dark-red: #6b1a1a;
            --blackish-red: #2d0a0a;
            --bone-white: #d4c5b0;
            --aged-gold: #b8956a;
            --shadow-black: #0a0604;
            --crimson-text: #8b0000;

            /* Card colors by faction */
            --universal-gradient: linear-gradient(135deg, #4a5568, #2d3748);
            --church-gradient: linear-gradient(135deg, #6b1a1a, #4a0e0e);
            --dwarves-gradient: linear-gradient(135deg, #8b7355, #4a3f2f);
            --ossuarium-gradient: linear-gradient(135deg, #1a3d1a, #0d1f0d);
            --elves-gradient: linear-gradient(135deg, #2d5a2d, #1a3d1a);
            --wyrd-conclave-gradient: linear-gradient(135deg, #4a1a5a, #2a0845);
            --nomads-gradient: linear-gradient(135deg, #5a4a2a, #3a2a1a);
            --crucible-gradient: linear-gradient(135deg, #5a2a1a, #3a1a0a);
            --emergent-gradient: linear-gradient(135deg, #3a4a2a, #1a2a1a);
            --vestige-bloodlines-gradient: linear-gradient(135deg, #6a1a2a, #4a0a1a);
            --exchange-gradient: linear-gradient(135deg, #2a3a4a, #1a2a3a);
            --equipment-gradient: linear-gradient(135deg, #5a4a3a, #3a2a1a);
        }

        body {
            font-family: 'Crimson Pro', Georgia, serif;
            background-color: var(--parchment-dark);
            background-image: linear-gradient(to bottom, var(--leather-brown) 0%, var(--parchment-dark) 50%, var(--shadow-black) 100%);
            background-attachment: fixed;
            color: var(--bone-white);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ===========================
           DECORATIVE PAGE BORDER
           =========================== */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 15px solid transparent;
            border-image: linear-gradient(135deg, var(--dark-red), var(--blackish-red), var(--blood-red), var(--blackish-red), var(--dark-red)) 15;
            pointer-events: none;
            z-index: 9999;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.8);
        }

        /* ===========================
           HEADER
           =========================== */
        .header {
            background: linear-gradient(to bottom, var(--blackish-red), var(--blood-red));
            border-bottom: 3px double var(--dark-red);
            padding: 2rem 3rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.9);
        }

        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            font-family: 'Cinzel Decorative', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--bone-white);
            text-shadow: 2px 2px 4px var(--shadow-black);
            letter-spacing: 0.1em;
        }

        .header-stats {
            font-family: 'Crimson Pro', serif;
            color: var(--aged-gold);
            font-size: 0.9rem;
            text-align: right;
            line-height: 1.8;
        }

        .header-stats strong {
            color: var(--bone-white);
        }

        .btn-deck-builder {
            background: linear-gradient(135deg, var(--blood-red), var(--blackish-red));
            border: 2px solid var(--aged-gold);
            color: var(--bone-white);
            padding: 0.75rem 1.5rem;
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.9rem;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
        }

        .btn-deck-builder:hover {
            background: linear-gradient(135deg, var(--dark-red), var(--blood-red));
            box-shadow: 0 0 15px rgba(184, 149, 106, 0.5);
            transform: translateY(-2px);
        }

        /* ===========================
           MAIN LAYOUT
           =========================== */
        .main-container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
            position: relative;
        }

        /* ===========================
           SIDEBAR FILTERS
           =========================== */
        .sidebar {
            background: linear-gradient(to bottom, rgba(43, 31, 23, 0.95), rgba(26, 20, 16, 0.95));
            border: 2px solid var(--blood-red);
            border-radius: 8px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 180px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
        }

        .filter-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--blood-red);
        }

        .filter-section:last-child {
            border-bottom: none;
        }

        .filter-title {
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--dark-red);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .search-box {
            width: 100%;
            padding: 0.75rem;
            background: var(--shadow-black);
            border: 2px solid var(--blood-red);
            border-radius: 4px;
            color: var(--bone-white);
            font-family: 'Crimson Pro', serif;
            font-size: 0.9rem;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--aged-gold);
            box-shadow: 0 0 10px rgba(184, 149, 106, 0.3);
        }

        .filter-checkbox-group {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 0.85rem;
            transition: color 0.2s ease;
            white-space: nowrap;
        }

        .filter-checkbox:hover {
            color: var(--aged-gold);
        }

        .filter-checkbox input[type="checkbox"] {
            margin-right: 0.5rem;
            cursor: pointer;
            accent-color: var(--blood-red);
        }

        .btn-clear-filters {
            width: 100%;
            padding: 0.75rem;
            background: var(--blood-red);
            border: 2px solid var(--dark-red);
            color: var(--bone-white);
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.85rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .btn-clear-filters:hover {
            background: var(--dark-red);
            box-shadow: 0 0 10px rgba(184, 149, 106, 0.3);
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .collapsible-header::after {
            content: '▼';
            transition: transform 0.3s ease;
            font-size: 0.8rem;
        }

        .collapsible-header.collapsed::after {
            transform: rotate(-90deg);
        }

        .collapsible-content {
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible-content.collapsed {
            max-height: 0;
        }

        /* ===========================
           CARD GRID AREA
           =========================== */
        .card-grid-area {
            min-height: 600px;
        }

        .controls-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(43, 31, 23, 0.5);
            border: 1px solid var(--blood-red);
            border-radius: 4px;
        }

        .results-counter {
            font-family: 'Crimson Pro', serif;
            color: var(--aged-gold);
            font-size: 0.9rem;
        }

        .view-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
        }

        .btn-view {
            padding: 0.5rem 1rem;
            background: var(--shadow-black);
            border: 2px solid var(--blood-red);
            color: var(--aged-gold);
            cursor: pointer;
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .btn-view.active {
            background: var(--blood-red);
            color: var(--bone-white);
        }

        .sort-select {
            padding: 0.5rem 1rem;
            background: var(--shadow-black);
            border: 2px solid var(--blood-red);
            border-radius: 4px;
            color: var(--bone-white);
            font-family: 'Crimson Pro', serif;
            font-size: 0.85rem;
            cursor: pointer;
        }

        /* ===========================
           CARD GRID VIEW
           =========================== */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .card-tile {
            background: var(--shadow-black);
            border: 2px solid var(--blood-red);
            border-radius: 8px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--universal-gradient);
        }

        .card-tile.church::before { background: var(--church-gradient); }
        .card-tile.dwarves::before { background: var(--dwarves-gradient); }
        .card-tile.ossuarium::before { background: var(--ossuarium-gradient); }
        .card-tile.elves::before { background: var(--elves-gradient); }
        .card-tile.wyrd-conclave::before { background: var(--wyrd-conclave-gradient); }
        .card-tile.nomads::before { background: var(--nomads-gradient); }
        .card-tile.crucible::before { background: var(--crucible-gradient); }
        .card-tile.emergent::before { background: var(--emergent-gradient); }
        .card-tile.vestige-bloodlines::before { background: var(--vestige-bloodlines-gradient); }
        .card-tile.exchange::before { background: var(--exchange-gradient); }
        .card-tile.equipment::before { background: var(--equipment-gradient); }

        .card-tile:hover {
            border-color: var(--aged-gold);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(184, 149, 106, 0.3);
        }

        .card-tile-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .card-tile-name {
            font-family: 'Cinzel Decorative', serif;
            font-size: 1.1rem;
            color: var(--bone-white);
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .card-tile-cost {
            background: var(--blood-red);
            color: var(--bone-white);
            padding: 0.3rem 0.6rem;
            border-radius: 50%;
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.9rem;
            font-weight: 700;
            min-width: 32px;
            text-align: center;
        }

        .card-tile-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .badge {
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-family: 'Cinzel Decorative', serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .badge-type {
            background: var(--dark-red);
            color: var(--bone-white);
        }

        .badge-damage {
            background: var(--crimson-text);
            color: var(--bone-white);
        }

        .badge-range {
            background: var(--aged-gold);
            color: var(--shadow-black);
        }

        .card-tile-effect {
            color: var(--aged-gold);
            font-size: 0.85rem;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* ===========================
           CARD LIST VIEW
           =========================== */
        .card-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .card-list-item {
            background: var(--shadow-black);
            border: 2px solid var(--blood-red);
            border-left: 6px solid var(--blood-red);
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: grid;
            grid-template-columns: 40px 2fr 1fr 1fr 1fr 1fr 3fr;
            gap: 1rem;
            align-items: center;
        }

        .card-list-item:hover {
            border-left-color: var(--aged-gold);
            background: rgba(75, 14, 14, 0.2);
        }

        .card-list-item.church { border-left-color: #6b1a1a; }
        .card-list-item.dwarves { border-left-color: #8b7355; }
        .card-list-item.ossuarium { border-left-color: #1a3d1a; }
        .card-list-item.elves { border-left-color: #2d5a2d; }
        .card-list-item.equipment { border-left-color: #5a4a3a; }

        .list-item-cost {
            background: var(--blood-red);
            color: var(--bone-white);
            padding: 0.5rem;
            border-radius: 50%;
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.9rem;
            font-weight: 700;
            text-align: center;
        }

        .list-item-name {
            font-family: 'Cinzel Decorative', serif;
            font-size: 1rem;
            color: var(--bone-white);
            font-weight: 700;
        }

        .list-item-text {
            color: var(--aged-gold);
            font-size: 0.85rem;
        }

        .list-item-effect {
            color: var(--aged-gold);
            font-size: 0.85rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* ===========================
           CARD DETAIL PANEL
           =========================== */
        .detail-panel {
            position: fixed;
            top: 0;
            right: -600px;
            width: 600px;
            height: 100vh;
            background: linear-gradient(to bottom, var(--leather-brown), var(--parchment-dark));
            border-left: 4px solid var(--blood-red);
            box-shadow: -4px 0 30px rgba(0, 0, 0, 0.9);
            z-index: 1000;
            transition: right 0.4s ease;
            overflow-y: auto;
            padding: 2rem;
        }

        .detail-panel.open {
            right: 0;
        }

        .detail-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 3px double var(--dark-red);
        }

        .detail-close {
            background: var(--blood-red);
            border: 2px solid var(--dark-red);
            color: var(--bone-white);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .detail-close:hover {
            background: var(--dark-red);
            transform: rotate(90deg);
        }

        .detail-card-name {
            font-family: 'Cinzel Decorative', serif;
            font-size: 2rem;
            color: var(--bone-white);
            font-weight: 700;
            letter-spacing: 0.08em;
            text-shadow: 2px 2px 4px var(--shadow-black);
            flex: 1;
        }

        .detail-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .detail-stat {
            background: rgba(10, 6, 4, 0.9);
            border: 2px solid var(--blood-red);
            padding: 1rem;
            border-radius: 4px;
        }

        .detail-stat-label {
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--dark-red);
            margin-bottom: 0.5rem;
            letter-spacing: 0.08em;
        }

        .detail-stat-value {
            font-size: 1.5rem;
            color: var(--bone-white);
            font-weight: 700;
        }

        .detail-section {
            margin-bottom: 2rem;
        }

        .detail-section-title {
            font-family: 'Cinzel Decorative', serif;
            font-size: 1.2rem;
            color: var(--dark-red);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .detail-effect-text {
            background: rgba(10, 6, 4, 0.9);
            border: 2px solid var(--blood-red);
            border-left: 6px solid var(--dark-red);
            padding: 1.5rem;
            border-radius: 4px;
            color: var(--bone-white);
            line-height: 1.8;
            font-size: 1rem;
        }

        .detail-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .keyword-tag {
            background: var(--blood-red);
            color: var(--bone-white);
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-family: 'Cinzel Decorative', serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .detail-equipment-info {
            background: rgba(43, 31, 23, 0.5);
            border: 2px solid var(--aged-gold);
            padding: 1rem;
            border-radius: 4px;
        }

        .equipment-info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .equipment-info-label {
            color: var(--aged-gold);
        }

        .equipment-info-value {
            color: var(--bone-white);
            font-weight: 700;
        }

        /* ===========================
           SPECIAL BUTTONS
           =========================== */
        .btn-random {
            background: linear-gradient(135deg, var(--aged-gold), #6b5a45);
            border: 2px solid var(--bone-white);
            color: var(--shadow-black);
            padding: 0.5rem 1.5rem;
            font-family: 'Cinzel Decorative', serif;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
        }

        .btn-random:hover {
            box-shadow: 0 0 15px rgba(184, 149, 106, 0.5);
            transform: scale(1.05);
        }

        /* ===========================
           LOADING & EMPTY STATES
           =========================== */
        .loading {
            text-align: center;
            padding: 4rem;
            font-size: 1.2rem;
            color: var(--aged-gold);
            font-family: 'Cinzel Decorative', serif;
        }

        .no-results {
            text-align: center;
            padding: 4rem;
            color: var(--aged-gold);
        }

        .no-results h3 {
            font-family: 'Cinzel Decorative', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark-red);
        }

        /* ===========================
           MOBILE RESPONSIVENESS
           =========================== */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: relative;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1.5rem 1rem;
            }

            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .header-title {
                font-size: 1.75rem;
            }

            .card-grid {
                grid-template-columns: 1fr;
            }

            .card-list-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .detail-panel {
                width: 100%;
                right: -100%;
            }

        }

        /* ===========================
           SCROLLBAR STYLING
           =========================== */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--shadow-black);
            border: 1px solid var(--blood-red);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, var(--blood-red), var(--blackish-red));
            border: 1px solid var(--dark-red);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-red);
        }

        /* Hide elements */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <div>
                <h1 class="header-title">PENANCE: CARD DATABASE</h1>
                <div class="header-stats">
                    <strong id="total-cards-count">300+</strong> Cards |
                    <strong>10</strong> Factions |
                    <strong>60+</strong> Equipment Items
                </div>
            </div>
            <div style="display: flex; gap: 1rem;">
                <a href="deck-builder.html" class="btn-deck-builder">Deck Builder</a>
                <a href="../index.html" class="btn-deck-builder" style="background: var(--aged-brown);">← Back to Main</a>
            </div>
        </div>
    </header>


    <!-- MAIN CONTAINER -->
    <div class="main-container">
        <!-- SIDEBAR FILTERS -->
        <aside class="sidebar">
            <!-- Search -->
            <div class="filter-section">
                <label for="search-input" class="filter-title">Search</label>
                <input type="text" id="search-input" class="search-box" placeholder="Card name, effect, keywords...">
            </div>

            <!-- Faction Filter -->
            <div class="filter-section">
                <div class="collapsible-header filter-title" data-target="faction-filters">
                    Faction
                </div>
                <div id="faction-filters" class="collapsible-content filter-checkbox-group">
                    <label class="filter-checkbox">
                        <input type="checkbox" value="universal" data-filter="faction"> Universal
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="church" data-filter="faction"> Church of Absolution
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="dwarves" data-filter="faction"> Dwarven Forge-Guilds
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="elves" data-filter="faction"> Verdant Covenant
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="ossuarium" data-filter="faction"> The Ossuarium
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="wyrd-conclave" data-filter="faction"> Wyrd Conclave
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="nomads" data-filter="faction"> Nomad Collective
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="crucible" data-filter="faction"> Crucible Packs
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="emergent" data-filter="faction"> Emergent Syndicate
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="vestige-bloodlines" data-filter="faction"> Vestige Bloodlines
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="exchange" data-filter="faction"> The Exchange
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="equipment" data-filter="faction"> Equipment
                    </label>
                </div>
            </div>

            <!-- Card Type Filter -->
            <div class="filter-section">
                <div class="collapsible-header filter-title" data-target="type-filters">
                    Card Type
                </div>
                <div id="type-filters" class="collapsible-content filter-checkbox-group">
                    <label class="filter-checkbox">
                        <input type="checkbox" value="movement" data-filter="type"> Movement
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="attack" data-filter="type"> Attack
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="defense" data-filter="type"> Defense
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="utility" data-filter="type"> Utility
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="support" data-filter="type"> Support
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="passive" data-filter="type"> Passive
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="reactive" data-filter="type"> Reactive
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="gambit" data-filter="type"> Gambit
                    </label>
                </div>
            </div>

            <!-- Cost Filter -->
            <div class="filter-section">
                <div class="collapsible-header filter-title" data-target="cost-filters">
                    Cost
                </div>
                <div id="cost-filters" class="collapsible-content filter-checkbox-group">
                    <label class="filter-checkbox">
                        <input type="checkbox" value="0" data-filter="cost"> 0 SP
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="1" data-filter="cost"> 1 SP
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="2" data-filter="cost"> 2 SP
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="3" data-filter="cost"> 3 SP
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="4" data-filter="cost"> 4 SP
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="5+" data-filter="cost"> 5+ SP
                    </label>
                </div>
            </div>

            <!-- Equipment Slot Filter -->
            <div class="filter-section" id="equipment-slot-section">
                <div class="collapsible-header filter-title" data-target="slot-filters">
                    Equipment Slot
                </div>
                <div id="slot-filters" class="collapsible-content filter-checkbox-group">
                    <label class="filter-checkbox">
                        <input type="checkbox" value="weapon" data-filter="slot"> Weapon
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="shield" data-filter="slot"> Shield
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="offhand" data-filter="slot"> Offhand
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="accessory" data-filter="slot"> Accessory
                    </label>
                </div>
            </div>

            <!-- Clear Filters -->
            <button class="btn-clear-filters" id="btn-clear-filters">Clear All Filters</button>
        </aside>

        <!-- CARD GRID AREA -->
        <main class="card-grid-area">
            <!-- Controls Bar -->
            <div class="controls-bar">
                <div class="results-counter" id="results-counter">
                    Showing <strong id="shown-count">0</strong> of <strong id="filtered-count">0</strong> cards
                </div>
                <div class="view-controls">
                    <button class="btn-random" id="btn-random">Random Card</button>
                    <div class="view-toggle">
                        <button class="btn-view active" data-view="grid">Grid</button>
                        <button class="btn-view" data-view="list">List</button>
                    </div>
                    <select class="sort-select" id="sort-select">
                        <option value="name-asc">Name (A-Z)</option>
                        <option value="name-desc">Name (Z-A)</option>
                        <option value="cost-asc">Cost (Low-High)</option>
                        <option value="cost-desc">Cost (High-Low)</option>
                        <option value="type">Type</option>
                    </select>
                </div>
            </div>

            <!-- Card Grid -->
            <div id="card-container" class="card-grid">
                <div class="loading">Loading cards...</div>
            </div>

            <!-- Load More (for pagination) -->
            <div style="text-align: center; margin-top: 2rem; display: none;" id="load-more-container">
                <button class="btn-deck-builder" id="btn-load-more">Load More Cards</button>
            </div>
        </main>
    </div>

    <!-- CARD DETAIL PANEL -->
    <div class="detail-panel" id="detail-panel">
        <div class="detail-panel-header">
            <h2 class="detail-card-name" id="detail-name">Card Name</h2>
            <button class="detail-close" id="detail-close">&times;</button>
        </div>

        <div class="detail-stats-grid" id="detail-stats">
            <!-- Stats will be populated by JavaScript -->
        </div>

        <div class="detail-section">
            <h3 class="detail-section-title">Effect</h3>
            <div class="detail-effect-text" id="detail-effect"></div>
        </div>

        <div class="detail-section" id="detail-keywords-section">
            <h3 class="detail-section-title">Keywords</h3>
            <div class="detail-keywords" id="detail-keywords"></div>
        </div>

        <div class="detail-section hidden" id="detail-equipment-section">
            <h3 class="detail-section-title">Equipment Info</h3>
            <div class="detail-equipment-info" id="detail-equipment-info"></div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // ===========================
        // DATA LOADING
        // ===========================
        let allCards = [];
        let filteredCards = [];
        let currentView = 'grid';
        let currentPage = 1;
        const cardsPerPage = 50;

        // Load card data
        async function loadCardData() {
            try {
                console.log('[Card DB] Starting to load card data...');
                const response = await fetch('complete-card-data.json?v=' + Date.now());
                console.log('[Card DB] Fetch response:', response.status, response.statusText);
                const data = await response.json();
                console.log('[Card DB] JSON parsed successfully');

                // Flatten card data into single array
                allCards = [];

                // Universal cards
                data.universal.forEach(card => {
                    allCards.push({ ...card, faction: 'universal', source: 'core' });
                });

                // Faction cards
                ['church', 'dwarves', 'ossuarium', 'elves', 'wyrd-conclave', 'nomads', 'crucible', 'emergent', 'vestige-bloodlines', 'exchange'].forEach(faction => {
                    if (data[faction]) {
                        data[faction].forEach(card => {
                            allCards.push({ ...card, faction: faction, source: 'faction' });
                        });
                    }
                });
                
                <!-- Equipment cards (flatten equipment structure) - tolerant to multiple JSON shapes -->
                if (data.equipment) {
                  // If equipment is an array (flat list) — iterate directly
                  if (Array.isArray(data.equipment)) {
                    data.equipment.forEach(equipItem => {
                      if (Array.isArray(equipItem.cards) && equipItem.cards.length > 0) {
                        equipItem.cards.forEach((card, index) => {
                          allCards.push({
                            id: `${equipItem.id}-${index}`,
                            name: `${equipItem.name}: ${card.name}`,
                            type: card.type || 'attack',
                            cost: card.cost,
                            range: card.range,
                            effect: card.effect,
                            damage: card.damage,
                            heat: card.heat,
                            keywords: card.keywords || [],
                            faction: 'equipment',
                            source: 'equipment',
                            slot: equipItem.slot,
                            weight: equipItem.weight,
                            craftingCost: equipItem.craftingCost,
                            equipmentName: equipItem.name,
                            cardCount: equipItem.cardCount || card.cardCount || 1
                          });
                        });
                      } else {
                        // Treat equipItem as a direct card entry
                        allCards.push({
                          id: equipItem.id,
                          name: equipItem.name,
                          type: equipItem.type || 'attack',
                          cost: equipItem.cost,
                          range: equipItem.range,
                          effect: equipItem.effect,
                          damage: equipItem.damage,
                          heat: equipItem.heat,
                          keywords: equipItem.keywords || [],
                          faction: 'equipment',
                          source: 'equipment',
                          slot: equipItem.slot,
                          weight: equipItem.weight,
                          craftingCost: equipItem.craftingCost,
                          equipmentName: equipItem.name,
                          cardCount: equipItem.cardCount || 1
                        });
                      }
                    });
                  } else {
                    // equipment is an object keyed by category (legacy/expected format)
                    Object.keys(data.equipment).forEach(category => {
                      const items = data.equipment[category] || [];
                      items.forEach(equipItem => {
                        if (Array.isArray(equipItem.cards) && equipItem.cards.length > 0) {
                          equipItem.cards.forEach((card, index) => {
                            allCards.push({
                              id: `${equipItem.id}-${index}`,
                              name: `${equipItem.name}: ${card.name}`,
                              type: card.type || 'attack',
                              cost: card.cost,
                              range: card.range,
                              effect: card.effect,
                              damage: card.damage,
                              heat: card.heat,
                              keywords: card.keywords || [],
                              faction: 'equipment',
                              source: 'equipment',
                              slot: equipItem.slot,
                              weight: equipItem.weight,
                              craftingCost: equipItem.craftingCost,
                              equipmentName: equipItem.name,
                              cardCount: equipItem.cardCount || card.cardCount || 1
                            });
                          });
                        } else {
                          allCards.push({
                            id: equipItem.id,
                            name: equipItem.name,
                            type: equipItem.type || 'attack',
                            cost: equipItem.cost,
                            range: equipItem.range,
                            effect: equipItem.effect,
                            damage: equipItem.damage,
                            heat: equipItem.heat,
                            keywords: equipItem.keywords || [],
                            faction: 'equipment',
                            source: 'equipment',
                            slot: equipItem.slot,
                            weight: equipItem.weight,
                            craftingCost: equipItem.craftingCost,
                            equipmentName: equipItem.name,
                            cardCount: equipItem.cardCount || 1
                          });
                        }
                      });
                    });
                  }
                }

                // Initial render
                console.log('[Card DB] Total cards loaded:', allCards.length);
                document.getElementById('total-cards-count').textContent = allCards.length;
                applyFilters();
                console.log('[Card DB] Cards rendered successfully!');

            } catch (error) {
                console.error('[Card DB] ERROR loading card data:', error);
                console.error('[Card DB] Error stack:', error.stack);
                document.getElementById('card-container').innerHTML = `<div class="no-results"><h3>Error loading cards</h3><p>${error.message}</p></div>`;
            }
        }

        // ===========================
        // FILTERING
        // ===========================
        function applyFilters() {
            let cards = [...allCards];

            // Filter by faction
            const factionFilters = Array.from(document.querySelectorAll('[data-filter="faction"]:checked'))
                .map(cb => cb.value);
            if (factionFilters.length > 0) {
                cards = cards.filter(card => factionFilters.includes(card.faction));
            }

            // Filter by search
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            if (searchTerm) {
                cards = cards.filter(card =>
                    card.name.toLowerCase().includes(searchTerm) ||
                    (card.effect && card.effect.toLowerCase().includes(searchTerm)) ||
                    (card.keywords && card.keywords.some(k => k.toLowerCase().includes(searchTerm)))
                );
            }

            // Filter by type
            const typeFilters = Array.from(document.querySelectorAll('[data-filter="type"]:checked'))
                .map(cb => cb.value);
            if (typeFilters.length > 0) {
                cards = cards.filter(card =>
                    typeFilters.some(type =>
                        card.type.toLowerCase().includes(type) ||
                        (card.keywords && card.keywords.some(k => k.toLowerCase().includes(type)))
                    )
                );
            }

            // Filter by cost
            const costFilters = Array.from(document.querySelectorAll('[data-filter="cost"]:checked'))
                .map(cb => cb.value);
            if (costFilters.length > 0) {
                cards = cards.filter(card => {
                    const cost = card.cost;
                    return costFilters.some(filter => {
                        if (filter === '5+') return cost >= 5;
                        return cost === parseInt(filter);
                    });
                });
            }

            // Filter by equipment slot
            const slotFilters = Array.from(document.querySelectorAll('[data-filter="slot"]:checked'))
                .map(cb => cb.value);
            if (slotFilters.length > 0) {
                cards = cards.filter(card => slotFilters.includes(card.slot));
            }

            // Sort
            const sortBy = document.getElementById('sort-select').value;
            cards = sortCards(cards, sortBy);

            filteredCards = cards;
            currentPage = 1;
            renderCards();
        }

        // ===========================
        // SORTING
        // ===========================
        function sortCards(cards, sortBy) {
            const sorted = [...cards];

            switch(sortBy) {
                case 'name-asc':
                    return sorted.sort((a, b) => a.name.localeCompare(b.name));
                case 'name-desc':
                    return sorted.sort((a, b) => b.name.localeCompare(a.name));
                case 'cost-asc':
                    return sorted.sort((a, b) => a.cost - b.cost);
                case 'cost-desc':
                    return sorted.sort((a, b) => b.cost - a.cost);
                case 'type':
                    return sorted.sort((a, b) => a.type.localeCompare(b.type));
                default:
                    return sorted;
            }
        }

        // ===========================
        // RENDERING
        // ===========================
        function renderCards() {
            const container = document.getElementById('card-container');
            const displayCards = filteredCards.slice(0, currentPage * cardsPerPage);

            // Update counters
            document.getElementById('shown-count').textContent = displayCards.length;
            document.getElementById('filtered-count').textContent = filteredCards.length;

            // Show/hide load more button
            const loadMoreContainer = document.getElementById('load-more-container');
            if (filteredCards.length > displayCards.length) {
                loadMoreContainer.style.display = 'block';
            } else {
                loadMoreContainer.style.display = 'none';
            }

            // Render based on view mode
            if (currentView === 'grid') {
                renderGridView(container, displayCards);
            } else {
                renderListView(container, displayCards);
            }

            // Show no results message
            if (filteredCards.length === 0) {
                container.innerHTML = '<div class="no-results"><h3>No cards found</h3><p>Try adjusting your filters</p></div>';
            }
        }

        function renderGridView(container, cards) {
            container.className = 'card-grid';
            container.innerHTML = cards.map(card => `
                <div class="card-tile ${card.faction}" data-card-id="${card.id}" onclick="showCardDetail('${card.id}')">
                    <div class="card-tile-header">
                        <div class="card-tile-name">${card.name}</div>
                        <div class="card-tile-cost">${card.cost}</div>
                    </div>
                    <div class="card-tile-badges">
                        <span class="badge badge-type">${card.type}</span>
                        ${card.damage ? `<span class="badge badge-damage">${card.damage} DMG</span>` : ''}
                        ${card.range ? `<span class="badge badge-range">${card.range}</span>` : ''}
                    </div>
                    <div class="card-tile-effect">${card.effect || 'No effect text'}</div>
                </div>
            `).join('');
        }

        function renderListView(container, cards) {
            container.className = 'card-list';
            container.innerHTML = cards.map(card => `
                <div class="card-list-item ${card.faction}" data-card-id="${card.id}" onclick="showCardDetail('${card.id}')">
                    <div class="list-item-cost">${card.cost}</div>
                    <div class="list-item-name">${card.name}</div>
                    <div class="list-item-text">${card.type}</div>
                    <div class="list-item-text">${card.range || 'N/A'}</div>
                    <div class="list-item-text">${card.damage || 'N/A'}</div>
                    <div class="list-item-text">${card.heat || '0'}</div>
                    <div class="list-item-effect">${card.effect || 'No effect'}</div>
                </div>
            `).join('');
        }

        // ===========================
        // CARD DETAIL PANEL
        // ===========================
        function showCardDetail(cardId) {
            const card = allCards.find(c => c.id === cardId);
            if (!card) return;

            // Populate detail panel
            document.getElementById('detail-name').textContent = card.name;

            // Stats grid
            const statsGrid = document.getElementById('detail-stats');
            statsGrid.innerHTML = `
                <div class="detail-stat">
                    <div class="detail-stat-label">Cost</div>
                    <div class="detail-stat-value">${card.cost} SP</div>
                </div>
                <div class="detail-stat">
                    <div class="detail-stat-label">Type</div>
                    <div class="detail-stat-value">${card.type}</div>
                </div>
                <div class="detail-stat">
                    <div class="detail-stat-label">Range</div>
                    <div class="detail-stat-value">${card.range || 'N/A'}</div>
                </div>
                <div class="detail-stat">
                    <div class="detail-stat-label">Damage</div>
                    <div class="detail-stat-value">${card.damage || 'N/A'}</div>
                </div>
                ${card.heat ? `
                <div class="detail-stat">
                    <div class="detail-stat-label">Heat</div>
                    <div class="detail-stat-value">${card.heat}</div>
                </div>
                ` : ''}
            `;

            // Effect
            document.getElementById('detail-effect').textContent = card.effect || 'No effect text';

            // Keywords
            const keywordsSection = document.getElementById('detail-keywords-section');
            const keywordsContainer = document.getElementById('detail-keywords');
            if (card.keywords && card.keywords.length > 0) {
                keywordsSection.classList.remove('hidden');
                keywordsContainer.innerHTML = card.keywords.map(k =>
                    `<span class="keyword-tag">${k}</span>`
                ).join('');
            } else {
                keywordsSection.classList.add('hidden');
            }

            // Equipment info
            const equipmentSection = document.getElementById('detail-equipment-section');
            const equipmentInfo = document.getElementById('detail-equipment-info');
            if (card.faction === 'equipment') {
                equipmentSection.classList.remove('hidden');
                equipmentInfo.innerHTML = `
                    <div class="equipment-info-row">
                        <span class="equipment-info-label">Equipment:</span>
                        <span class="equipment-info-value">${card.equipmentName || 'N/A'}</span>
                    </div>
                    <div class="equipment-info-row">
                        <span class="equipment-info-label">Slot:</span>
                        <span class="equipment-info-value">${card.slot || 'N/A'}</span>
                    </div>
                    <div class="equipment-info-row">
                        <span class="equipment-info-label">Weight:</span>
                        <span class="equipment-info-value">${card.weight || 'N/A'}</span>
                    </div>
                    <div class="equipment-info-row">
                        <span class="equipment-info-label">Crafting Cost:</span>
                        <span class="equipment-info-value">${card.craftingCost || 'N/A'} Scrap</span>
                    </div>
                    <div class="equipment-info-row">
                        <span class="equipment-info-label">Card Count:</span>
                        <span class="equipment-info-value">${card.cardCount || 'N/A'} cards</span>
                    </div>
                `;
            } else {
                equipmentSection.classList.add('hidden');
            }

            // Open panel
            document.getElementById('detail-panel').classList.add('open');
        }

        function closeCardDetail() {
            document.getElementById('detail-panel').classList.remove('open');
        }

        // ===========================
        // EVENT LISTENERS
        // ===========================
        document.addEventListener('DOMContentLoaded', () => {
            // Load data
            loadCardData();

            // Search input (debounced)
            let searchTimeout;
            document.getElementById('search-input').addEventListener('input', () => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => applyFilters(), 300);
            });

            // Filter checkboxes
            document.querySelectorAll('[data-filter]').forEach(checkbox => {
                checkbox.addEventListener('change', applyFilters);
            });

            // Clear filters
            document.getElementById('btn-clear-filters').addEventListener('click', () => {
                document.getElementById('search-input').value = '';
                document.querySelectorAll('[data-filter]').forEach(cb => cb.checked = false);
                applyFilters();
            });

            // View toggle
            document.querySelectorAll('.btn-view').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.btn-view').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentView = btn.dataset.view;
                    renderCards();
                });
            });

            // Sort select
            document.getElementById('sort-select').addEventListener('change', applyFilters);

            // Random card
            document.getElementById('btn-random').addEventListener('click', () => {
                const randomCard = filteredCards[Math.floor(Math.random() * filteredCards.length)];
                if (randomCard) showCardDetail(randomCard.id);
            });

            // Load more
            document.getElementById('btn-load-more').addEventListener('click', () => {
                currentPage++;
                renderCards();
            });

            // Close detail panel
            document.getElementById('detail-close').addEventListener('click', closeCardDetail);

            // Collapsible sections
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', () => {
                    const targetId = header.dataset.target;
                    const target = document.getElementById(targetId);
                    header.classList.toggle('collapsed');
                    target.classList.toggle('collapsed');
                });
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeCardDetail();
                } else if (e.key === '/' && document.activeElement !== document.getElementById('search-input')) {
                    e.preventDefault();
                    document.getElementById('search-input').focus();
                }
            });
        });
    </script>
</body>
</html>
