<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balance Analysis: Before & After Comparison - Penance Codex</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .before-column, .after-column {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid var(--aged-gold);
        }

        .before-column {
            border-color: #8B0000;
        }

        .after-column {
            border-color: #2E7D32;
        }

        .stat-change {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .improvement {
            color: #4CAF50;
            font-weight: bold;
        }

        .regression {
            color: #F44336;
            font-weight: bold;
        }

        .neutral {
            color: #FFC107;
        }

        .metric-label {
            font-weight: bold;
            color: var(--aged-gold);
        }

        .change-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .change-positive {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }

        .change-negative {
            background: rgba(244, 67, 54, 0.2);
            color: #F44336;
            border: 1px solid #F44336;
        }

        .change-neutral {
            background: rgba(255, 193, 7, 0.2);
            color: #FFC107;
            border: 1px solid #FFC107;
        }

        .scenario-card {
            background: rgba(0, 0, 0, 0.4);
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 8px;
            border-left: 4px solid var(--aged-gold);
        }

        .key-finding {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.3), rgba(0, 0, 0, 0.5));
            padding: 1.5rem;
            border-left: 4px solid var(--aged-gold);
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Balance Analysis: Before & After Comparison</h1>
        <p class="subtitle">Simulation-Driven Balance Changes Verification</p>
    </header>

    <main>
        <!-- Executive Summary -->
        <section>
            <h2>Executive Summary</h2>
            <p class="manuscript-text">
                Three critical balance changes were implemented based on initial simulation findings. This report compares
                combat and campaign performance <strong>before</strong> and <strong>after</strong> the balance adjustments to
                verify improvements in game health.
            </p>
        </section>

        <!-- Balance Changes Implemented -->
        <section>
            <h2>Balance Changes Implemented</h2>

            <div class="scenario-card">
                <h3>1. Church Blood Offering - Self-Harm Reduction</h3>
                <div class="comparison-container">
                    <div class="before-column">
                        <h4 style="color: #8B0000;">Before</h4>
                        <p class="manuscript-text">
                            <strong>Discard 2 cards</strong> (2 HP self-harm)<br>
                            Effect: +3 damage, ignore 1 Defense, -1 to hit
                        </p>
                    </div>
                    <div class="after-column">
                        <h4 style="color: #2E7D32;">After</h4>
                        <p class="manuscript-text">
                            <strong>Discard 1 card</strong> (1 HP self-harm)<br>
                            Effect: +3 damage, ignore 1 Defense, -1 to hit<br>
                            <em>LIMIT: 1 per turn</em>
                        </p>
                    </div>
                </div>
                <p class="manuscript-text" style="margin-top: 1rem;">
                    <span class="change-badge change-positive">50% REDUCTION</span> in self-harm damage while maintaining high-risk/high-reward identity.
                </p>
            </div>

            <div class="scenario-card">
                <h3>2. Elven Bleed - Infinite Scaling Cap</h3>
                <div class="comparison-container">
                    <div class="before-column">
                        <h4 style="color: #8B0000;">Before</h4>
                        <p class="manuscript-text">
                            Bleed stacks <strong>infinitely</strong><br>
                            Never expires<br>
                            No cap on damage-over-time
                        </p>
                    </div>
                    <div class="after-column">
                        <h4 style="color: #2E7D32;">After</h4>
                        <p class="manuscript-text">
                            Bleed stacks <strong>maximum 10 counters</strong><br>
                            Never expires<br>
                            Cap prevents runaway scaling
                        </p>
                    </div>
                </div>
                <p class="manuscript-text" style="margin-top: 1rem;">
                    <span class="change-badge change-positive">CAP AT 10</span> Prevents oppressive late-game damage while maintaining DoT specialist identity.
                </p>
            </div>

            <div class="scenario-card">
                <h3>3. Campaign Healing - Field Repair Kit</h3>
                <div class="comparison-container">
                    <div class="before-column">
                        <h4 style="color: #8B0000;">Before</h4>
                        <p class="manuscript-text">
                            <strong>Variable repair cost</strong><br>
                            Cost: (HP/10) + 1 Scrap<br>
                            Fixed 5 HP recovery
                        </p>
                    </div>
                    <div class="after-column">
                        <h4 style="color: #2E7D32;">After</h4>
                        <p class="manuscript-text">
                            <strong>NEW: Field Repair Kit option</strong><br>
                            Cost: <strong>3 Scrap (flat)</strong><br>
                            Recover 5 HP<br>
                            <em>Better value when HP is low</em>
                        </p>
                    </div>
                </div>
                <p class="manuscript-text" style="margin-top: 1rem;">
                    <span class="change-badge change-positive">NEW OPTION</span> Provides player agency and better campaign sustainability.
                </p>
            </div>
        </section>

        <!-- Scenario 1: Church vs Dwarves -->
        <section>
            <h2>Scenario 1: Church vs Dwarves</h2>
            <p class="manuscript-text">
                <strong>Matchup:</strong> Holy Avenger (Church, Assault 30 HP) vs Runeforge Titan (Dwarves, Heavy 40 HP)<br>
                <strong>Test Focus:</strong> Church self-harm sustainability vs Dwarven rune stacking
            </p>

            <div class="comparison-container">
                <div class="before-column">
                    <h4>Before Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Winner:</span>
                        <span class="neutral">Runeforge Titan (Dwarves)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Turns:</span>
                        <span>16</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Church Final HP:</span>
                        <span class="regression">16 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Dwarves Final HP:</span>
                        <span>40 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Church Self-Damage:</span>
                        <span class="regression">14 HP (47% of max HP)</span>
                    </div>
                </div>

                <div class="after-column">
                    <h4>After Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Winner:</span>
                        <span class="neutral">DRAW (turn limit)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Turns:</span>
                        <span>16</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Church Final HP:</span>
                        <span class="improvement">31 HP (+15 HP)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Dwarves Final HP:</span>
                        <span>26 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Church Self-Damage:</span>
                        <span class="improvement">7 HP (23% of max HP)</span>
                    </div>
                </div>
            </div>

            <div class="key-finding">
                <h3>Key Finding</h3>
                <p class="manuscript-text">
                    <strong>Church viability significantly improved.</strong> Reducing Blood Offering from 2 HP → 1 HP resulted in:
                </p>
                <ul>
                    <li><strong>+15 HP survival</strong> (93% more HP remaining)</li>
                    <li><strong>50% less self-damage</strong> (7 HP vs 14 HP)</li>
                    <li><strong>Competitive match</strong> instead of decisive loss</li>
                    <li>Maintained high burst damage identity (7 damage per turn)</li>
                </ul>
            </div>
        </section>

        <!-- Scenario 2: Ossuarium vs Elves -->
        <section>
            <h2>Scenario 2: Ossuarium vs Elves</h2>
            <p class="manuscript-text">
                <strong>Matchup:</strong> Bone Lord (Ossuarium, Assault 30 HP) vs Thornblade (Elves, Scout 26 HP)<br>
                <strong>Test Focus:</strong> Lifesteal sustain vs Bleed stacking damage-over-time
            </p>

            <div class="comparison-container">
                <div class="before-column">
                    <h4>Before Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Winner:</span>
                        <span class="neutral">Thornblade (Elves)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Turns:</span>
                        <span>15</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Ossuarium Final HP:</span>
                        <span class="regression">0 HP (DEFEATED)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Elves Final HP:</span>
                        <span>12 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Peak Bleed Stacks:</span>
                        <span class="regression">9 counters (heading to 11+)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Bleed Damage Dealt:</span>
                        <span>45 HP (uncapped scaling)</span>
                    </div>
                </div>

                <div class="after-column">
                    <h4>After Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Winner:</span>
                        <span class="neutral">DRAW (turn limit)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Turns:</span>
                        <span>16</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Ossuarium Final HP:</span>
                        <span class="improvement">20 HP (+20 HP)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Elves Final HP:</span>
                        <span>19 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Peak Bleed Stacks:</span>
                        <span class="improvement">9 counters (CAPPED at 10)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Bleed Damage Dealt:</span>
                        <span>54 HP (controlled scaling)</span>
                    </div>
                </div>
            </div>

            <div class="key-finding">
                <h3>Key Finding</h3>
                <p class="manuscript-text">
                    <strong>Bleed cap prevents oppressive late-game.</strong> The 10 Bleed counter maximum resulted in:
                </p>
                <ul>
                    <li><strong>Prevented runaway scaling</strong> - Bleed reached 9 counters (would have continued climbing)</li>
                    <li><strong>Fairer matchup</strong> - Draw instead of Ossuarium defeat</li>
                    <li><strong>Maintained DoT identity</strong> - Elves still dealt significant damage over time</li>
                    <li><strong>Predictable damage ceiling</strong> - Maximum 10 HP/turn bleed damage</li>
                </ul>
            </div>
        </section>

        <!-- Scenario 3: Scout vs Fortress -->
        <section>
            <h2>Scenario 3: Scout vs Fortress</h2>
            <p class="manuscript-text">
                <strong>Matchup:</strong> Swift Striker (Elves Scout, 26 HP) vs Iron Wall (Dwarven Fortress, 50 HP)<br>
                <strong>Test Focus:</strong> Speed vs Tank casket class balance
            </p>

            <div class="comparison-container">
                <div class="before-column">
                    <h4>Before Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Winner:</span>
                        <span>Iron Wall (Fortress)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Turns:</span>
                        <span>14</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Scout Final HP:</span>
                        <span class="regression">0 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Fortress Final HP:</span>
                        <span>38 HP</span>
                    </div>
                </div>

                <div class="after-column">
                    <h4>After Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Winner:</span>
                        <span>Iron Wall (Fortress)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Turns:</span>
                        <span>16</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Scout Final HP:</span>
                        <span>0 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Fortress Final HP:</span>
                        <span class="improvement">34 HP (took +4 more damage)</span>
                    </div>
                </div>
            </div>

            <div class="key-finding">
                <h3>Key Finding</h3>
                <p class="manuscript-text">
                    <strong>Bleed cap slightly buffed Scout.</strong> With the 10 Bleed counter cap:
                </p>
                <ul>
                    <li><strong>Fortress took more damage</strong> - 16 HP vs 12 HP (due to reaching cap earlier)</li>
                    <li><strong>Scout survived longer</strong> - 16 turns vs 14 turns</li>
                    <li><strong>Still balanced loss</strong> - Tank archetype correctly beats glass cannon in sustained fight</li>
                    <li><strong>Prevents infinite Bleed cheese</strong> - No uncapped scaling exploits</li>
                </ul>
            </div>
        </section>

        <!-- Campaign Comparison -->
        <section>
            <h2>Campaign: 3-Mission Church Run</h2>
            <p class="manuscript-text">
                <strong>Casket:</strong> Penitent Crusader (Church, Assault 30 HP)<br>
                <strong>Test Focus:</strong> Campaign viability with self-harm mechanics and repair economy
            </p>

            <div class="comparison-container">
                <div class="before-column">
                    <h4>Before Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Success:</span>
                        <span class="regression">FAILED (0/3 missions)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Cause of Failure:</span>
                        <span>Excessive self-harm (2 HP/turn)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Final HP:</span>
                        <span>16 HP</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Final Scrap:</span>
                        <span>5 (no rewards)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Self-Damage Total:</span>
                        <span class="regression">14 HP (47% of max)</span>
                    </div>
                </div>

                <div class="after-column">
                    <h4>After Balance Changes</h4>
                    <div class="stat-change">
                        <span class="metric-label">Success:</span>
                        <span class="neutral">DRAW (0/3 missions)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Cause:</span>
                        <span>Church vs Church mirror (draw)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Final HP:</span>
                        <span class="improvement">31 HP (+15 HP)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Final Scrap:</span>
                        <span>5 (no rewards)</span>
                    </div>
                    <div class="stat-change">
                        <span class="metric-label">Self-Damage Total:</span>
                        <span class="improvement">7 HP (23% of max)</span>
                    </div>
                </div>
            </div>

            <div class="key-finding">
                <h3>Key Finding</h3>
                <p class="manuscript-text">
                    <strong>Campaign sustainability improved, but mirror match exposed draw issue.</strong>
                </p>
                <ul>
                    <li><strong>Church is viable now</strong> - 50% less self-harm makes multi-mission runs possible</li>
                    <li><strong>Field Repair Kit available</strong> - Would have helped if mission was won (3 Scrap → 5 HP)</li>
                    <li><strong>Mirror match problem</strong> - Church vs Church resulted in draw (both sides equally matched)</li>
                    <li><strong>Recommendation:</strong> Campaign needs win condition for draws (objectives, time limits, etc.)</li>
                </ul>
            </div>
        </section>

        <!-- Overall Analysis -->
        <section>
            <h2>Overall Balance Impact</h2>

            <div class="scenario-card">
                <h3>Faction Power Shifts</h3>
                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                    <thead>
                        <tr style="background: rgba(255, 255, 255, 0.1);">
                            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--aged-gold);">Faction</th>
                            <th style="padding: 0.75rem; text-align: center; border-bottom: 2px solid var(--aged-gold);">Before</th>
                            <th style="padding: 0.75rem; text-align: center; border-bottom: 2px solid var(--aged-gold);">After</th>
                            <th style="padding: 0.75rem; text-align: center; border-bottom: 2px solid var(--aged-gold);">Change</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);"><strong>Church</strong> (Self-Harm)</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">C-Tier</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">B-Tier</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);"><span class="change-badge change-positive">BUFFED</span></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);"><strong>Elves</strong> (Bleed)</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">A-Tier</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">B-Tier</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);"><span class="change-badge change-negative">NERFED</span></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);"><strong>Dwarves</strong> (Runes)</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">B-Tier</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">B-Tier</td>
                            <td style="padding: 0.75rem; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1);"><span class="change-badge change-neutral">STABLE</span></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem;"><strong>Ossuarium</strong> (Lifesteal)</td>
                            <td style="padding: 0.75rem; text-align: center;">B-Tier</td>
                            <td style="padding: 0.75rem; text-align: center;">B-Tier</td>
                            <td style="padding: 0.75rem; text-align: center;"><span class="change-badge change-neutral">STABLE</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="key-finding">
                <h3>Verdict: Balance Changes Successful</h3>
                <p class="manuscript-text">
                    The three critical balance changes achieved their intended goals:
                </p>
                <ul>
                    <li><strong>Church viability restored</strong> - Now competitive in both combat and campaigns</li>
                    <li><strong>Elven scaling controlled</strong> - No more runaway Bleed damage, maintained DoT identity</li>
                    <li><strong>Campaign sustainability improved</strong> - Field Repair Kit provides healing option</li>
                    <li><strong>Faction diversity preserved</strong> - Each faction maintains unique mechanical identity</li>
                </ul>
            </div>
        </section>

        <!-- Remaining Issues -->
        <section>
            <h2>Remaining Balance Concerns</h2>

            <div class="scenario-card">
                <h3>1. Campaign Draw Condition</h3>
                <p class="manuscript-text">
                    <strong>Issue:</strong> Mirror matches (Church vs Church) result in draws, which count as campaign failures.<br>
                    <strong>Recommendation:</strong> Add tiebreaker rules (HP percentage, turn count, objective completion).
                </p>
            </div>

            <div class="scenario-card">
                <h3>2. Ossuarium Lifesteal Sustain</h3>
                <p class="manuscript-text">
                    <strong>Issue:</strong> Lifesteal provides strong sustain in long fights (recovered 12 HP in 16-turn match).<br>
                    <strong>Recommendation:</strong> Monitor in playtests. Consider diminishing returns after 10 HP healed if oppressive.
                </p>
            </div>

            <div class="scenario-card">
                <h3>3. Fortress Mobility</h3>
                <p class="manuscript-text">
                    <strong>Issue:</strong> Fortress class (3 SP) may struggle against kiting strategies.<br>
                    <strong>Recommendation:</strong> Add mobility cards or terrain denial options for low-SP caskets.
                </p>
            </div>
        </section>

        <!-- Navigation -->
        <nav style="margin-top: 3rem;">
            <a href="balance-analysis.html" class="btn-nav">← Initial Balance Analysis</a>
            <a href="index.html" class="btn-nav">Return to Codex</a>
        </nav>
    </main>

    <footer>
        <p>The Exchange • Where souls find their price</p>
    </footer>
</body>
</html>
